<!DOCTYPE html>
<!--
root html template file for ARMS application

parent: none
children: accountFragment, bookingFragment, invoiceFragment

version 4.0
Author: Matthew Bass
-->

<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" >
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Arms SPA</title>

        <!-- Bootstrap CSS (CDN) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- custom CSS overrides bootstrap as needed -->
        <link href="/Arms.css" th:href="@{/Arms.css}" rel="stylesheet">
    </head>

<body>

<main id="page-content" class="container py-4" role="main" aria-label="Page content"
      th:attr="data-account-id=${accountId}">

    <div id="accountDiv" class="service mb-3" aria-labelledby="account-heading">
        <h2 id="account-heading" class="visually-hidden">Account</h2>


        <!-- include accountFragment only when account model exists -->
        <div id="accountContentGood" th:if="${account != null}
            " th:replace="accountFragment :: account(accountId=${accountId}, account=${account})"></div>

        <!-- empty fallback when no account (prevents fragment parsing errors) -->
        <div id="accountContentBad" th:if="${account == null}"></div>
    </div>


    <div id="bookingDiv" class="service mb-3" aria-labelledby="bookings-heading">
        <h2 id="bookings-heading" class="visually-hidden">Bookings</h2>

        <!-- include bookingFragment only with accountId -->
        <div id="bookingContentGood" th:if="${accountId != null}"
             th:replace="bookingFragment :: bookings(accountId=${accountId}, bookings=${bookings},
                                                     bookMode=${bookMode}, selectedBooking=${selectedBooking})"></div>

        <!-- empty fallback when no accountId (prevents fragment parsing errors) -->
        <div id="bookingContentBad" th:if="${accountId == null}"></div>

    </div>


    <div id="invoiceDiv" class="service mb-3" aria-labelledby="invoices-heading">
        <h2 id="invoices-heading" class="visually-hidden">Invoices</h2>

        <!-- include invoiceFragment only when we have an accountId (pass parameters to match fragment signature) -->
        <div id="invoiceContentGood" th:if="${accountId != null}"
             th:replace="invoiceFragment
                   :: invoices(accountId=${accountId}, invoices=${invoices},
                      selectedInvoice=${selectedInvoice}, invoiceMode=${invoiceMode})"></div>

        <!-- empty fallback when no accountId (prevents fragment parsing errors) -->
        <div id="invoiceContentBad" th:if="${accountId == null}"></div>

    </div>

</main>

    <!-- Bootstrap JS bundle (only if you use interactive Bootstrap components) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
    <!-- custom JS overrides bootstrap as needed-->
    <script src="/Arms.js" th:src="@{/Arms.js}" defer></script>
</body>

</html>